(function(e,u){typeof exports=="object"&&typeof module<"u"?u(require("vue"),require("sfc-common"),require("sfc-common/components")):typeof define=="function"&&define.amd?define(["vue","sfc-common","sfc-common/components"],u):(e=typeof globalThis<"u"?globalThis:e||self,u(e.Vue,e.SfcCommon,e.Components))})(this,function(e,u,_){"use strict";var b;(t=>{(a=>{function k(l,d){return{url:"/nwt/findWolByUid",params:{uid:l,checkOnline:!!d}}}a.findByUid=k;function c(l){return{url:"/nwt/saveWolDevice",method:"post",headers:{"Content-Type":"application/json"},data:l}}a.saveWolDevice=c;function f(l){return{url:"/nwt/wakeWolDevice",params:{id:l}}}a.wakeWolDevice=f;function V(l){return{url:"/nwt/batchDeleteWol",data:l,method:"post",headers:{"Content-Type":"application/json"}}}a.batchDelete=V})(t.Wol||(t.Wol={}));function p(){return{url:"/nwt/getAllInterface"}}t.getAllInterface=p,(a=>{function k(){return{url:"/nwt/listUPnP"}}a.listUPnP=k;function c(l,d){return{url:`/nwt/getUPnPIcon?usn=${l}&index=${d}`}}a.getUPnPIcon=c;function f(l,d){return{url:"/nwt/getUpnpServiceScpd",params:{usn:l,serviceType:d}}}a.getUpnpServiceScpd=f;function V(l){return u.useJsonBody({url:"/nwt/invokeUpnpService",method:"post",data:l})}a.invokeUpnpService=V})(t.UPnP||(t.UPnP={}))})(b||(b={}));const S={class:"tip"},E={style:{"padding-left":"24px"}},T={style:{"padding-left":"24px"}},P=e.defineComponent({name:"NetworkInterfaceInfoCard"}),R=e.defineComponent({...P,props:{networkInterface:{type:Object,default:()=>({})}},setup(t){return(p,a)=>{const k=e.resolveComponent("VCardText"),c=e.resolveComponent("VCard");return e.openBlock(),e.createBlock(c,{class:"network-interface-info-card",title:t.networkInterface.name},{default:e.withCtx(()=>[e.createVNode(k,null,{default:e.withCtx(()=>[e.createElementVNode("div",S,[e.createElementVNode("div",null,"接口: "+e.toDisplayString(t.networkInterface.name),1),e.createElementVNode("div",null,"名称: "+e.toDisplayString(t.networkInterface.displayName),1),e.createElementVNode("div",null,"MAC: "+e.toDisplayString(t.networkInterface.mac),1),e.createElementVNode("div",null,[a[0]||(a[0]=e.createTextVNode(" IP地址: ")),e.createElementVNode("ul",E,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.networkInterface.ipList,f=>(e.openBlock(),e.createElementBlock("li",{key:f},e.toDisplayString(f),1))),128))])]),e.createElementVNode("div",null,[a[1]||(a[1]=e.createTextVNode(" 广播地址: ")),e.createElementVNode("ul",T,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.networkInterface.broadcastAddressList,f=>(e.openBlock(),e.createElementBlock("li",{key:f},e.toDisplayString(f),1))),128))])]),e.createElementVNode("div",null,"MTU: "+e.toDisplayString(t.networkInterface.mtu),1)])]),_:1})]),_:1},8,["title"])}}}),D=(t,p)=>{const a=t.__vccOpts||t;for(const[k,c]of p)a[k]=c;return a},I=D(R,[["__scopeId","data-v-5b95a363"]]),$={style:{display:"flex","flex-wrap":"wrap"}},M=e.defineComponent({name:"NetworkInterfaceList",components:{NetworkInterfaceInfoCard:I}}),O=e.defineComponent({...M,setup(t){const p=window.SfcUtils,a=new u.LoadingManager,k=a.getLoadingRef(),c=e.ref([]);return u.MethodInterceptor.createAsyncActionProxy({async loadData(){c.value=(await p.request(b.getAllInterface())).data.data}},!1,a).loadData(),(V,l)=>{const d=e.resolveComponent("LoadingMask");return e.openBlock(),e.createElementBlock("div",null,[e.createVNode(d,{loading:e.unref(k)},null,8,["loading"]),e.createElementVNode("div",$,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(c.value,i=>(e.openBlock(),e.createBlock(I,{key:i.name,style:{animation:"up-in .2s"},"network-interface":i},null,8,["network-interface"]))),128))])])}}}),W=["src"],F=e.defineComponent({name:"UpnpIcon"}),A=e.defineComponent({...F,props:{device:{type:Object,default:void 0},color:{type:String,default:void 0}},setup(t){const p=window.SfcUtils,a=t,k=e.ref(void 0),c=e.ref(!1);function f(){console.log("UPnP图标加载完成"),c.value=!0}e.onMounted(()=>{var d;const l=(d=a.device)==null?void 0:d.describe.device.iconList;if(l&&l.length>0){const i=l.findIndex(C=>{var x;return(x=C.mimetype)==null?void 0:x.includes("png")})!=-1;let s=0,m=0;l.forEach((C,x)=>{var n;if(i&&!((n=C.mimetype)!=null&&n.includes("png")))return;const o=C.height*C.width;o>s&&(s=o,m=x)}),k.value=p.getApiUrl(b.UPnP.getUPnPIcon(a.device.describe.device.udn,m))}});function V(l){const d=l.describe.device.deviceType;return d.startsWith("urn:schemas-upnp-org:device:InternetGatewayDevice")?"mdi-router-network":d.startsWith("urn:schemas-upnp-org:device:MediaRenderer")?"mdi-movie-play":d.startsWith("urn:schemas-upnp-org:device:MediaServer")?"mdi-play-network":d.startsWith("urn:schemas-upnp-org:device:Printer")?"mdi-printer-outline":d.startsWith("urn:schemas-upnp-org:device:DigitalSecurityCamera")||d.startsWith("urn:schemas-upnp-org:device:IPCamera")?"mdi-cctv":d.startsWith("urn:schemas-upnp-org:device:Scanner:1")?"mdi-scanner":"mdi-network"}return(l,d)=>{const i=e.resolveComponent("CommonIcon");return t.device?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[c.value?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(i,{key:0,icon:V(t.device),color:t.color},null,8,["icon","color"])),k.value?e.withDirectives((e.openBlock(),e.createElementBlock("img",{key:1,src:k.value,width:"30",onLoad:f},null,40,W)),[[e.vShow,c.value]]):e.createCommentVNode("",!0)],64)):e.createCommentVNode("",!0)}}}),j={class:"mt-2"},q={key:0},z=e.defineComponent({name:"UpnpServiceActionInvoke"}),G=e.defineComponent({...z,props:{device:{type:Object,default:void 0},service:{type:Object,default:void 0}},setup(t,{expose:p}){const a=t,k=window.SfcUtils,c=new u.LoadingManager,f=c.getLoadingRef();let V=e.ref(),l=e.ref(""),d=e.ref([]),i=e.reactive({}),s;const m=u.MethodInterceptor.createAsyncActionProxy({async loadScpd(){var n;if(!a.device||!((n=a.service)!=null&&n.serviceType))return Promise.reject("缺少设备udn/usn 或 服务serviceType");s=(await k.request(b.UPnP.getUpnpServiceScpd(a.device.describe.device.udn,a.service.serviceType))).data.data;const o={};s.serviceStateTable.forEach(r=>{o[r.name]=r}),s.actionList.flatMap(r=>r.argumentList).filter(r=>r).forEach(r=>r.variableRef=o[r.relatedStateVariable]),V.value=s.actionList.map(r=>({title:r.name,value:r.name,actionObj:r})),l.value=V.value[0].value},async invokeUpnpService(){var n,r;const o=(await k.request(b.UPnP.invokeUpnpService({rootDeviceUSN:(n=a.device)==null?void 0:n.describe.device.udn,action:l.value,serviceType:(r=a.service)==null?void 0:r.serviceType,actionParams:Object.keys(i).map(y=>({key:y,value:i[y]}))}))).data.data;return k.alert(o.responseBody,o.statusCode==200?"调用成功":"调用失败"),o}},!0,c);function C(o){d.value=o.actionObj.argumentList||[],Object.keys(i).forEach(n=>delete i[n]),d.value.filter(n=>{var r;return((r=n.variableRef)==null?void 0:r.defaultValue)!==void 0&&n.variableRef.defaultValue!==null}).forEach(n=>{var y,N;let r=i[n.name]=(y=n.variableRef)==null?void 0:y.defaultValue;((N=n.variableRef)==null?void 0:N.dataType)=="boolean"&&(r=r=="true"),i[n.name]=r})}function x(){return Object.assign({},i)}return e.onMounted(()=>m.loadScpd()),p({getParams:x,invokeUpnpService:m.invokeUpnpService}),(o,n)=>{const r=e.resolveComponent("LoadingMask"),y=e.resolveComponent("FormSelect"),N=e.resolveComponent("VCheckbox"),B=e.resolveComponent("TextInput");return e.openBlock(),e.createElementBlock("div",null,[e.createVNode(r,{loading:e.unref(f)},null,8,["loading"]),e.createVNode(y,{modelValue:e.unref(l),"onUpdate:modelValue":n[0]||(n[0]=w=>e.isRef(l)?l.value=w:l=w),items:e.unref(V),label:"UPnP服务方法",onChange:C},null,8,["modelValue","items"]),e.createElementVNode("div",j,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(d),w=>{var U,g;return e.openBlock(),e.createElementBlock(e.Fragment,{key:w.name},[w.direction=="in"?(e.openBlock(),e.createElementBlock("div",q,[((U=w.variableRef)==null?void 0:U.dataType)=="boolean"?(e.openBlock(),e.createBlock(N,{key:0,modelValue:e.unref(i)[w.name],"onUpdate:modelValue":h=>e.unref(i)[w.name]=h,label:w.name,color:"primary"},null,8,["modelValue","onUpdate:modelValue","label"])):(g=w.variableRef)!=null&&g.allowedValueList?(e.openBlock(),e.createBlock(y,{key:1,modelValue:e.unref(i)[w.name],"onUpdate:modelValue":h=>e.unref(i)[w.name]=h,items:w.variableRef.allowedValueList.map(h=>({title:h,value:h})),label:w.name,onChange:h=>e.unref(i)[w.name]=h.value},null,8,["modelValue","onUpdate:modelValue","items","label","onChange"])):(e.openBlock(),e.createBlock(B,{key:2,modelValue:e.unref(i)[w.name],"onUpdate:modelValue":h=>e.unref(i)[w.name]=h,label:w.name},null,8,["modelValue","onUpdate:modelValue","label"]))])):e.createCommentVNode("",!0)],64)}),128))])])}}}),J={class:"mt-3"},H={class:"ml-2"},K={key:0},Q=["href"],X=["href"],Y=["title"],Z={key:0},v=["href"],ee={class:"mt-2"},te=e.defineComponent({name:"UpnpInfoCard"}),ne=e.defineComponent({...te,props:{},setup(t){const p=window.SfcUtils;let a=e.ref([]);const k={async loadUPnpList(){const s=(await p.request(b.UPnP.listUPnP())).data.data;return a.value=s,s}},c=new u.LoadingManager,f=c.getLoadingRef(),V=u.MethodInterceptor.createAsyncActionProxy(k,!0,c);function l(s){return new URL(s).host}function d(s){var x,o;const m=[s.describe.device],C=[];for(;m.length>0;){const n=m.pop();(x=n==null?void 0:n.serviceList)==null||x.forEach(r=>C.push(r)),(o=n==null?void 0:n.deviceList)==null||o.forEach(r=>m.push(r))}return C}function i(s,m){const C=p.openComponentDialog(G,{props:{device:s,service:m},title:"UPnP服务调用",extraDialogOptions:{persistent:!0,width:"800px",confirmText:"执行",cancelText:"关闭"},onConfirm(){return C.getComponentInstRef().invokeUpnpService(),!1}})}return e.onMounted(()=>{V.loadUPnpList()}),(s,m)=>{const C=e.resolveComponent("CommonIcon"),x=e.resolveComponent("VBtn"),o=e.resolveComponent("LoadingMask"),n=e.resolveComponent("VCardTitle"),r=e.resolveComponent("VCol"),y=e.resolveComponent("VRow"),N=e.resolveComponent("VDivider"),B=e.resolveComponent("VChip"),w=e.resolveComponent("VCardText"),U=e.resolveComponent("VCard");return e.openBlock(),e.createElementBlock("div",null,[e.createVNode(x,{color:"primary",onClick:e.unref(V).loadUPnpList},{default:e.withCtx(()=>[e.createVNode(C,{icon:"mdi-refresh"}),m[0]||(m[0]=e.createTextVNode(" 刷新 "))]),_:1},8,["onClick"]),e.createElementVNode("div",J,[e.createVNode(o,{loading:e.unref(f)},null,8,["loading"]),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(a),g=>(e.openBlock(),e.createBlock(U,{key:g.describe.device.udn,class:"mb-2"},{default:e.withCtx(()=>[e.createVNode(n,{color:"primary",title:g.describe.device.friendlyName,class:"d-flex"},{default:e.withCtx(()=>[e.createVNode(A,{device:g,color:"primary"},null,8,["device"]),e.createElementVNode("span",H,e.toDisplayString(g.describe.device.friendlyName),1)]),_:2},1032,["title"]),e.createVNode(w,null,{default:e.withCtx(()=>[e.createVNode(y,null,{default:e.withCtx(()=>[e.createVNode(r,null,{default:e.withCtx(()=>[e.createElementVNode("p",null,"设备型号名称: "+e.toDisplayString(g.describe.device.modelName),1),g.describe.device.modelURL?(e.openBlock(),e.createElementBlock("p",K,[m[1]||(m[1]=e.createTextVNode(" 设备型号页面: ")),e.createElementVNode("a",{target:"_blank",class:"link",href:g.describe.device.modelURL},e.toDisplayString(g.describe.device.modelURL),9,Q)])):e.createCommentVNode("",!0),e.createElementVNode("p",null,"厂商: "+e.toDisplayString(g.describe.device.manufacturer),1),e.createElementVNode("p",null,[m[2]||(m[2]=e.createTextVNode("厂商主页: ")),e.createElementVNode("a",{target:"_blank",class:"link",href:g.describe.device.manufacturerURL},e.toDisplayString(g.describe.device.manufacturerURL),9,X)])]),_:2},1024),e.createVNode(r,null,{default:e.withCtx(()=>[e.createElementVNode("p",null,"设备地址: "+e.toDisplayString(l(g.location)),1),e.createElementVNode("p",{title:g.describe.device.deviceType}," 设备类型: "+e.toDisplayString(g.describe.device.deviceType.split(":")[3]),9,Y),g.describe.device.presentationURL?(e.openBlock(),e.createElementBlock("p",Z,[m[3]||(m[3]=e.createTextVNode(" 管理页面: ")),e.createElementVNode("a",{target:"_blank",class:"link",href:g.describe.device.presentationURL},e.toDisplayString(g.describe.device.presentationURL),9,v)])):e.createCommentVNode("",!0)]),_:2},1024)]),_:2},1024),e.createVNode(N),e.createElementVNode("div",ee,[m[4]||(m[4]=e.createTextVNode(" 包含服务: ")),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(d(g),h=>(e.openBlock(),e.createBlock(B,{key:h.serviceId,color:"primary",title:h.serviceType,class:"mr-2",onClick:ke=>i(g,h)},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(h.serviceType.split(":")[3]),1)]),_:2},1032,["title","onClick"]))),128))])]),_:2},1024)]),_:2},1024))),128))])])}}}),oe={class:"d-flex justify-space-between"},le={class:"tip",style:{width:"calc(100% - 12px)","margin-left":"12px"}},ae={class:"d-flex align-center"},re=e.defineComponent({name:"WolDeviceCard"}),ie=e.defineComponent({...re,props:{wolDevice:{type:Object,default:()=>({})},loading:{type:Boolean,default:!1},editable:{type:Boolean,default:!0}},emits:["wake","edit","delete"],setup(t,{emit:p}){const a=p;return(k,c)=>{const f=e.resolveComponent("LoadingMask"),V=e.resolveComponent("CommonIcon"),l=e.resolveComponent("VBtn"),d=e.resolveComponent("VCardText"),i=e.resolveComponent("VCard");return e.openBlock(),e.createBlock(i,{class:"wol-device-card"},{default:e.withCtx(()=>[e.createVNode(f,{loading:t.loading,type:"circular"},null,8,["loading"]),e.createVNode(d,null,{default:e.withCtx(()=>[e.createElementVNode("div",oe,[e.createElementVNode("div",null,[e.createVNode(V,{icon:"mdi-laptop",color:t.wolDevice.isOnline?"primary":"",style:{"font-size":"32px"}},null,8,["color"])]),e.createElementVNode("div",le,[e.createElementVNode("div",ae,[e.createTextVNode(" 设备名: "+e.toDisplayString(t.wolDevice.name)+" ",1),t.editable?(e.openBlock(),e.createBlock(V,{key:0,class:"link d-flex align-center",style:{"font-size":"10px","margin-left":"6px"},icon:"mdi-pencil",onClick:c[0]||(c[0]=s=>a("edit",t.wolDevice))})):e.createCommentVNode("",!0),t.editable?(e.openBlock(),e.createBlock(V,{key:1,class:"link d-flex align-center text-error",style:{"font-size":"10px","margin-left":"6px","--main-color":"var(--v-theme-error)"},icon:"mdi-close",onClick:c[1]||(c[1]=s=>a("delete",t.wolDevice))})):e.createCommentVNode("",!0)]),e.createElementVNode("div",null,"MAC: "+e.toDisplayString(t.wolDevice.mac),1),e.createElementVNode("div",null,"IP: "+e.toDisplayString(t.wolDevice.ip),1)]),e.createElementVNode("div",null,[t.wolDevice.isOnline?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(l,{key:0,style:{"margin-top":"6px"},icon:"mdi-power",color:"primary",onClick:c[2]||(c[2]=s=>a("wake",t.wolDevice))}))])])]),_:1})]),_:1})}}}),L=D(ie,[["__scopeId","data-v-46224d94"]]),ce=e.defineComponent({name:"WolDeviceForm",components:{FormRow:_.FormRow,FormCol:_.FormCol,TextInput:_.TextInput}}),de=e.defineComponent({...ce,props:{initObject:{type:Object,default:void 0},readOnly:{type:Boolean,default:!1}},emits:["submit"],setup(t,{expose:p,emit:a}){const k=window.SfcUtils,c=e.ref(),f=t,V=u.defineForm({actions:{async submit(){return await k.request(b.Wol.saveWolDevice(l))}},formData:{name:"",port:9,ip:"",mac:"",sendIp:"255.255.255.255"},formRef:c,validators:{name:[u.Validators.notNull(),u.Validators.maxLen("不能大于255个字符",255)],mac:[u.Validators.isMatchRegex("^([abcdefABCDEF\\d]{2}[:\\-]?){6}$","不是有效的mac地址")],ip:[u.Validators.notNull(),u.Validators.isMatchRegex("^((2((5[0-5])|([0-4]\\d)))|([0-1]?\\d{1,2}))(\\.((2((5[0-5])|([0-4]\\d)))|([0-1]?\\d{1,2}))){3}$","不是有效的ipv4地址")],port:[u.Validators.minNum(1),u.Validators.maxNum(65535)]},throwError:!0}),{formData:l,actions:d,validators:i,loadingRef:s,loadingManager:m}=V,C=m.getLoadingRef();return f.initObject&&Object.assign(l,f.initObject),p(V),(x,o)=>{const n=e.resolveComponent("LoadingMask"),r=e.resolveComponent("base-form");return e.openBlock(),e.createBlock(r,{ref_key:"formRef",ref:c,"model-value":e.unref(l),"submit-action":e.unref(d).submit},{default:e.withCtx(()=>[e.createVNode(n,{loading:e.unref(C)},null,8,["loading"]),e.createVNode(e.unref(_.FormRow),null,{default:e.withCtx(()=>[e.createVNode(e.unref(_.FormCol),null,{default:e.withCtx(()=>[e.createVNode(e.unref(_.TextInput),{modelValue:e.unref(l).name,"onUpdate:modelValue":o[0]||(o[0]=y=>e.unref(l).name=y),label:"设备名称",rules:e.unref(i).name,placeholder:"起个名字吧~",readonly:t.readOnly},null,8,["modelValue","rules","readonly"])]),_:1}),e.createVNode(e.unref(_.FormCol),null,{default:e.withCtx(()=>[e.createVNode(e.unref(_.TextInput),{modelValue:e.unref(l).mac,"onUpdate:modelValue":o[1]||(o[1]=y=>e.unref(l).mac=y),label:"MAC地址",rules:e.unref(i).mac,placeholder:"关键参数",readonly:t.readOnly},null,8,["modelValue","rules","readonly"])]),_:1}),e.createVNode(e.unref(_.FormCol),null,{default:e.withCtx(()=>[e.createVNode(e.unref(_.TextInput),{modelValue:e.unref(l).port,"onUpdate:modelValue":o[2]||(o[2]=y=>e.unref(l).port=y),label:"端口(udp)",rules:e.unref(i).port,placeholder:"默认UDP端口-9",readonly:t.readOnly},null,8,["modelValue","rules","readonly"])]),_:1}),e.createVNode(e.unref(_.FormCol),null,{default:e.withCtx(()=>[e.createVNode(e.unref(_.TextInput),{modelValue:e.unref(l).ip,"onUpdate:modelValue":o[3]||(o[3]=y=>e.unref(l).ip=y),label:"IP地址(ipv4)",rules:e.unref(i).ip,placeholder:"用来检测是否在线",readonly:t.readOnly},null,8,["modelValue","rules","readonly"])]),_:1}),e.createVNode(e.unref(_.FormCol),{class:"mw-50"},{default:e.withCtx(()=>[e.createVNode(e.unref(_.TextInput),{modelValue:e.unref(l).sendIp,"onUpdate:modelValue":o[4]||(o[4]=y=>e.unref(l).sendIp=y),label:"发送/广播地址",rules:e.unref(i).ip,placeholder:"255.255.255.255",readonly:t.readOnly},null,8,["modelValue","rules","readonly"])]),_:1})]),_:1})]),_:1},8,["model-value","submit-action"])}}}),se={class:"WolDeviceList"},me={style:{"margin-top":"12px"}},pe=e.defineComponent({name:"WolDeviceList",components:{WolDeviceCard:L,LoadingMask:_.LoadingMask}}),fe=e.defineComponent({...pe,props:{uid:{type:[String,Number],default:0},showAdd:{type:Boolean,default:!0},autoRefresh:{type:Boolean,default:!0},desktopComponentConfig:{type:Object,default:void 0},editable:{type:Boolean,default:!0}},setup(t){const p=window.SfcUtils,a=t,k=new u.LoadingManager,c=k.getLoadingRef(),f=e.ref([]),V=e.reactive({}),l=async()=>{var o;f.value=(await p.request(b.Wol.findByUid(((o=a.desktopComponentConfig)==null?void 0:o.uid)||a.uid,!0))).data.data||[],f.value.forEach(n=>{n.isOnline&&(V[n.id]=!1)})},d=async o=>{await p.confirm(`确定要唤醒设备${o.name}吗？`,"唤醒确认").then(()=>s.wake(o))},i=async o=>{const n=`确定要删除 ${o.length==1?o[0].name:o.length+"个设备"} 吗？`;await p.confirm(n,"删除确认"),await s.batchDelete(o),p.snackbar("删除成功"),await s.loadData()},s=u.MethodInterceptor.createAsyncActionProxy({async loadData(){await l()},async wake(o){await p.request(b.Wol.wakeWolDevice(o.id)),V[o.id]=!0},async batchDelete(o){await p.request(b.Wol.batchDelete(o.map(n=>n.id)))}},!1,k),m=o=>{var r;const n=p.openComponentDialog(de,{title:o?"编辑设备":"添加设备",props:{initObject:o||{uid:((r=a.desktopComponentConfig)==null?void 0:r.uid)||a.uid}},extraDialogOptions:{persistent:!0},async onConfirm(){return(await n.getInstAsForm().submit()).success?(p.snackbar(o?"保存成功":"添加成功"),s.loadData(),!0):!1}})};s.loadData();let C=!1,x=setInterval(async()=>{if(!(!a.autoRefresh||C||!f.value.find(o=>V[o.id])))try{C=!0,await l()}finally{C=!1}},5e3);return e.onUnmounted(()=>{x&&clearInterval(x)}),(o,n)=>{const r=e.resolveComponent("VBtn"),y=e.resolveComponent("CommonIcon");return e.openBlock(),e.createElementBlock("div",se,[t.showAdd?(e.openBlock(),e.createBlock(r,{key:0,color:"primary",style:{"margin-right":"12px"},onClick:n[0]||(n[0]=N=>m())},{default:e.withCtx(()=>n[3]||(n[3]=[e.createTextVNode(" 添加设备 ")])),_:1})):e.createCommentVNode("",!0),e.createVNode(r,{onClick:e.unref(s).loadData},{default:e.withCtx(()=>[e.createVNode(y,{icon:"mdi-refresh"}),n[4]||(n[4]=e.createTextVNode(" 刷新 "))]),_:1},8,["onClick"]),e.createVNode(e.unref(_.LoadingMask),{loading:e.unref(c)},null,8,["loading"]),e.createElementVNode("div",me,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(f.value,N=>(e.openBlock(),e.createBlock(L,{key:N.id,style:{animation:"up-in .2s"},"wol-device":N,editable:t.editable,loading:V[N.id],onWake:d,onEdit:n[1]||(n[1]=B=>m(B)),onDelete:n[2]||(n[2]=B=>i([B]))},null,8,["wol-device","editable","loading"]))),128))])])}}});window.bootContext.addProcessor({taskName:"注册网络工具",execute(t,p){t.component("WolDeviceList",fe),t.component("NetworkInterfaceList",O),t.component("UpnpInfoCard",ne)}})});
